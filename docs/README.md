# 미션 - 크리스마스 프로모션

## 도메인 명세 사항

### Value Object

상품의 정보나 메뉴의 타입 등, 값 전달이나 정보의 정의 등은 여기다가 모아주시면 됩니다!
Value Object들은 모두 getter를 가지고 사용하시면 됩니다.
----

- [x] BadgeType : 뱃지의 타입과 충족 가격이 정의된 enum 클래스 입니다.
    - [x] `(뱃지의 이름, 목표 가격)`이 필드로 주어집니다.
        - 5천 원 이상: 별
        - 1만 원 이상: 트리
        - 2만 원 이상: 산타


- [x] Product : 판매하고 있는 제품(메뉴)의 enum 클래스 입니다.
    - [x] `이름,가격` 쌍으로 이루어진다.
    - [x] 가격을 반환하는 함수를 가진다.
    - [x] 해당 제품의 이름을 통해 Product를 반환하는 함수를 가지고 있습니다.


- [x] MenuType : 메뉴의 타입을 정의하는 enum 클래스 입니다.
    - [x] 에피타이저, 메인, 디저트, 음료 4가지로 나뉜다.
    - [x] 각 메뉴 타입 당 Product의 그룹을 가집니다.
        - [x] `List<Products>`
    - [x] Product를 통해 타입을 알 수 있는 static 함수를 가집니다.


- Product : 판매하는 메뉴의 enum 클래스 모음입니다!
    - [x] 이름-가격 쌍으로 이루어진다.
    - [x] 가격을 반환하는 함수를 가진다.

- EventCalendar : 이벤트를 진행하는 2023년 12달의 달력입니다.
    - [x] 예약 날짜를 가집니다
        - 1 ~ 31일 사이로 들어오는지 검증해야합니다.
    - [x] 할인 날짜(Star Day)를 가집니다.
        - [x] 3, 10, 17, 24, 25, 31
        - [x] 날짜를 매개변수로 넣으면 해당 날짜가 StarDay인지 아닌지 반환하는 함수를 가집니다.
        - [x] 요일을 넣으면 해당 날짜가 평일할인인지, 주말 할인 적용 대상인지를 반환하는 함수를 가집니다.

### 일반 도메인

일반 도메인은 최대한 객체로써 로직을 가지고, getter를 최대한 지양하도록 설계했습니다!
앞으로 확장할때도 이점 유의해주세요!
-----

- OrderProduct : 손님이 주문한 특정 Product의 개수의 클래스입니다!
    - [x] 주문한 메뉴(Product)를 가진다.
    - [x] 필드로 메뉴 개수를 가진다.
    - [x] `해당 메뉴x개수`를 통해 해당 메뉴의 총 가격을 반환하는 함수를 가져야합니다!
    - [x] Product 클래스 노출을 방지하기 위해 반환하는 것은 메뉴의 이름(String) 입니다!
    - [x] 메뉴 타입도 반환해주는 함수를 가집니다!
    - [x] 매개변수로 들어온 타입과 같은지 확인하고 그 개수를 반환하는 함수도 가집니다.
    - [x] getQuantity(getter)를 가지긴하지만 default로 제한해서 같은 패키지에서만 알 수 있게 해뒀습니다.
    - [x] 0개가 들어오지 못하게 하고, 해당 Product가 존재하는지 확인해야합니다.


- Orders : OrderProduct들의 모음과 주문 날짜를 가지는 클래스입니다!
    - [x] `List<OrderProducts>`를 가지도록 합니다.
        - [x] List가 비어있다면 예외를 발생
        - [x] 동일한 OrderProduct가 있다면 예외를 발생
    - [x] 주문한 메뉴의 개수가 20개를 초과하면 예외를 발생시킨다.
    - [x] 음료만 주문했을 시 예외를 발생시킨다.
    - [x] 주문 개수가 0개이면 예외를 발생시킨다.
    - [x] 주문 일자를 가진다.
    - [x] 해당 일자가 1 ~ 31일 사이가 아니면 예외를 발생시킨다.
    - [x] 할인전 총 가격을 반환하는 함수를 가진다.


- DiscountStrategy : 할인 정책을 담은 인터페이스
    - [x] discount() 함수를 가진다.
    - [x] 매개변수로 Orders를 가진다.
    - [x] 반환값은 총 할인 금액을 반환해야 한다.


- [x] ChristMasDiscountStrategy: 크리스마스 디데이 할인
    - [x] 12월 1일에 1000원 할인부터 시작한다.
    - [x] 12월 1일 ~ 12월 25일까지 진행한다.
    - [x] 25일 이후가 들어오면 0원을 반환한다.
    - [x] 1일부터 하루가 지날때마다 +100원씩 추가적으로 할인된다.
    - [x] 2일에는 1100원 할인, 3일에는 1200원.. 25일에는 3400원 할인
    - [x] 총 할인 금액을 반환한다.(최대 3400원)


- [x] WeeklyDiscountStrategy : 평일/주말 할인
    - [x] 금 ~ 토 요일에는 주말 할인을 적용한다.
    - [x] 메인 메뉴 하나 당 2023원 할인
    - [x] 일 ~ 목은 평일 할인을 적용한다.
    - [x] 디저트 메뉴 하나 당 2023원 할인


- [x] SpecialDiscountStrategy : 특별 할인
    - [x] 이벤트 달력에 Star가 있는 날이면 1000원을 할인한다.
    - [x] 반환값은 0 또는 1000이어야 한다.


- [x] DiscountCalculator : 할인 계산기 입니다.
    - [x] 해당 클래스를 통해 적용가능한 모든 할인을 진행합니다.
        - [x] 만원 이하일때는 아무 할인 이벤트도 받지 못한다.
    - [x] Orders를 매개변수로 넣으면 할인의 이름과 총 할인 금액의 리스트를 반환한다.
        - [x] 할인 금액이 0원인 것은 리스트에서 제외한다.
        - [x] 총 구입 금액에 따라 다른 배지를 반환하는 함수를 가진다.
        - [x] 가장 높은 것 하나만 반환해야 한다.
    - [x] DiscounStrategy의 세부 구현 사항을 숨기기 위해 할인이 된 가격만 반환합니다.


- [x] Benefit : 혜택에 대한 내역을 가지는 클래스
    - [x] 보상으로 얻는 뱃지의 타입을 가진다.
    - [x] 혜택 금액을 반환하는 함수를 가진다.
    - [x] 추가 증정 메뉴를 받기를 시도하는 함수를 가진다.
        - [x] Product를 반환하도록 한다.
        - [x] 120,000원이 넘으면 샴페인을 반환한다.
    - [x] 할인 후 지불 금액을 반환하는 함수를 가진다.
    - [x] 적용가능한 할인과 그 할인 금액을 반환한다.

## 서비스

- [x] OrderService : 고객의 주문을 생성하는 서비스
    - [x] `List<OrdurProduct>` 가 필요하다.
    - [x] 주문 일이 필요하다.
    - [x] OrderDTO.output을 생성하는 함수를 가진다.
    - [x] 할인전 총 금액을 반환하는 함수를 가진다.

- [x] BenefitService : 증정 상품, 뱃지 등 혜택과 관련된 서비스입니다.
    - [x] DiscountCalculator와 originalTotalPrice를 생성자 주입 받습니다.
    - [x] 내부적으로 증정 상품을 반환합니다.
    - [x] 내부적으로 Benefit을 생성합니다.
    - [x] BenefitDTO를 생성하는 함수를 가진다.


- [x] DiscountService : 할인을 계산하고 총 할인과 관련된 로직을 진행하는 서비스 단입니다.
    - [x] DiscountCalculator와 originalTotalPrice를 생성자 주입받습니다.
    - [x] DiscountDto를 생성하는 로직을 가집니다.

## DTO

- [x] OrderDTO
    - [x] Input 필요 정보
        - [x] (주문 메뉴,개수) DTO
        - [x] 식당 방문 일자
    - [x] Output 필요 정보
        - [x] 방문 일자
        - [x] (주문 메뉴, 개수) DTO


- [x] BenefitDto : 혜택과 관련된 OutputDto
    - [x] 증정 상품
    - [x] 증정 뱃지
    - [x] 총 혜택 금액

- [x] DiscountDto : 할인과 관련된 OutputDTO
    - [x] 할인 후 총 금액
    - [x] 할인 혜택별 할인 금액

- [x] ProductDto : 제품의 이름과 개수 관련된 OutputDto
    - [x] 제품 이름(String)을 가진다.
    - [x] 제품 개수(int)를 가진다.

## View

- [x] Parameter : Input과 Output에서 쓰이는 상수값들을 모아둔 파라미터
    - [x] Input class : 입력에서만 쓰이는 상수 정보들
        - "orderProducts" : 주문 메뉴
        - "orderDay" : 주문 날짜
    - [x] Output class : 출력에서만 쓰이는 상수 정보들
        - "orderDto" orderDto
        - "discountDto" discountDto
        - "benefitDto" benefitDto

### InputView

- 사용자의 편의성을 증대시키기위해서 입력에서 들어오는 모든 공백은 제거한채로 인식합니다!
- [x] OrderInputView : 주문 관련된 입력을 받는 클래스
    - [x] 예약 날짜를 입력받는다.
        - [x] 숫자 이외에 다른 입력이 들어오면 예외를 발생시킨다.
        - [x] 띄어쓰기 정도는 trim()해준다.
    - [x] 주문 메뉴와 개수를 `메뉴이름-개수` 의 쌍으로 입력받는다.
        - [x] `-`를 구분자로 사용한다.
        - [x] 구분자를 기점으로 뒤에 숫자 이외에 다른 것이 들어오면 예외가 발생한다.
        - [x] 구분자를 기점으로 문자 외에 다른 것들(숫자,특수기호)가 들어오면 예외가 발생한다.

### OutputView

- [x] OrderOutputView : 주문과 관련된 OutputView
    - [x] 처음 생성될 때 `안녕하세요! 우테코 식당 12월 이벤트 플래너입니다.`를 출력한다.
    - [x] 날짜 입력 전에 `12월 중 식당 예상 방문 날짜는 언제인가요? (숫자만 입력해 주세요!)`를 출력한다.
    - [x] 메뉴 입력 전에`주문하실 메뉴를 메뉴와 개수를 알려 주세요.`를 출력한다.
    - [x] 주문 내역과 할인 전 총 금액을 출력한다.
    - [x] 에러가 발생했을 때의 에러 텍스트가 나와야합니다.

- [x] BenefitOutputView : 혜택과 관련된 OutputView
    - [x] BenefitDto와 DiscountDto를 사용한다.
    - [x] 아래의 출력을 모두 출력해야합니다.

```
  <증정 메뉴>
  샴페인 1개

<혜택 내역>
크리스마스 디데이 할인: -1,200원
평일 할인: -4,046원
특별 할인: -1,000원
증정 이벤트: -25,000원

<총혜택 금액>
-31,246원

<할인 후 예상 결제 금액>
135,754원

<12월 이벤트 배지>
산타
```

## 유틸리티

- ErrorManager : 예외 메시지를 제어하고, 재실행시키는 유틸리티 클래
    - [x] 각 예외가 발생했을 때의 예외 메시지를 가진다. 음
    - [x] 접두사로 `[ERROR]`을 가진다.
    - [x] 매개변수로 넘겨받은 함수가 예외가 발생하는지 검사한다.
        - [x] 예외가 발생한다면 연결된 예외 텍스트를 띄운다.
        - [x] 그리고 성공할때까지 해당 함수를 재실행한다.